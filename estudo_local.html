<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Contribuição Local</title>
  <style>
    :root{
      --azul:#0b2f6b;
      --azul2:#0f4aa2;
      --cinza:#f3f5f8;
      --texto:#102033;
      --borda:#e6e9ef;
    }
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--cinza);color:var(--texto);}
    header{background:var(--azul);color:#fff;padding:15px 20px;}
    header h1{margin:0;font-size:20px;}
    nav{background:#fff;border-bottom:1px solid var(--borda);padding:10px 18px;display:flex;gap:10px;flex-wrap:wrap}
    nav a{color:var(--azul2);text-decoration:none;font-weight:700;padding:8px 10px;border-radius:8px}
    nav a:hover{background:#eef4ff}
    .wrap{max-width:1100px;margin:20px auto;padding:0 16px;}
    .card{background:#fff;border:1px solid var(--borda);border-radius:14px;padding:14px;box-shadow:0 2px 10px rgba(0,0,0,.05);margin-bottom:14px}
    h2{margin:0 0 10px;color:var(--azul)}
    .filters{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    select,input{padding:10px 10px;border:1px solid var(--borda);border-radius:10px;min-width:220px}
    table{width:100%;border-collapse:collapse;margin-top:12px;background:#fff;border:1px solid var(--borda);border-radius:12px;overflow:hidden}
    th,td{padding:10px;border-bottom:1px solid var(--borda);text-align:left}
    th{background:#eef4ff;color:var(--azul)}
    a{color:var(--azul2);font-weight:800;text-decoration:none}
    a:hover{text-decoration:underline}
    .muted{opacity:.75}
    footer{margin-top:26px;background:#fff;border-top:1px solid var(--borda)}
    footer .wrap{display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;padding:16px}
    footer a{color:var(--azul2);text-decoration:none;font-weight:700}
  </style>
</head>
<body>
<header>
  <h1>Contribuição Local</h1>
</header>

<nav>
  <a href="index.html">Início</a>
  <a href="calendario.html">Calendário</a>
  <a href="estudo_local.html">Contribuição Local</a>
  <a href="estudo_federal.html">Contribuição Federal</a>
</nav>

<div class="wrap">
  <div class="card">
    <h2>Escrita de Pareceres Técnicos, Emendas e Sugestões</h2>
    <div class="muted">
      Use este espaço para organizar e registrar a produção técnica (parecer + emenda + sugestão) em âmbito local.
    </div>
  </div>

  <div class="card">
    <h2>Relatórios (Local)</h2>
    <div class="filters">
      <select id="filtroTema">
        <option value="">Filtrar por tema</option>
        <option value="Educação">Educação</option>
        <option value="Saúde">Saúde</option>
        <option value="Direitos das Mulheres">Direitos das Mulheres</option>
        <option value="Outros">Outros</option>
      </select>

      <input id="busca" type="text" placeholder="Buscar por palavra-chave...">
    </div>

    <table>
      <thead>
        <tr>
          <th>Título</th>
          <th>Tema</th>
          <th>Local</th>
          <th>Data</th>
        </tr>
      </thead>
      <tbody id="listaRelatorios"></tbody>
    </table>

    <div id="mensagem" class="muted" style="margin-top:10px"></div>
  </div>
</div>

<footer>
  <div class="wrap">
    <div>© 2026 Nexo Governamental XI de Agosto</div>
    <div>
      <a href="index.html">Início</a> ·
      <a href="calendario.html">Calendário</a> ·
      <a href="estudo_federal.html">Federal</a>
    </div>
  </div>
</footer>

<script>
  // Relatórios (exemplo). Você pode duplicar e criar relatorio_02.html, relatorio_03.html etc.
  const relatorios = [
    {
      titulo: "Relatório 01 - Contribuição Local",
      tema: "Educação",
      local: "São Paulo",
      data: "2026-02-01",
      link: "estudo_local/relatorio_01.html"
    }
  ];

  const listaEl = document.getElementById("listaRelatorios");
  const msgEl = document.getElementById("mensagem");
  const filtroTemaEl = document.getElementById("filtroTema");
  const buscaEl = document.getElementById("busca");

  function render(){
    const tema = (filtroTemaEl.value || "").trim();
    const busca = (buscaEl.value || "").trim().toLowerCase();

    const filtrados = relatorios.filter(r=>{
      const okTema = !tema || r.tema === tema;
      const okBusca = !busca || (
        r.titulo.toLowerCase().includes(busca) ||
        r.local.toLowerCase().includes(busca) ||
        r.tema.toLowerCase().includes(busca)
      );
      return okTema && okBusca;
    });

    listaEl.innerHTML = "";
    if(filtrados.length === 0){
      msgEl.textContent = "Nenhum relatório encontrado com esses filtros.";
      return;
    }
    msgEl.textContent = "";

    filtrados.forEach(r=>{
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><a href="${r.link}">${r.titulo}</a></td>
        <td>${r.tema}</td>
        <td>${r.local}</td>
        <td>${r.data}</td>
      `;
      listaEl.appendChild(tr);
    });
  }

  // ✅ “À prova de bug”: renderiza ao carregar e a cada mudança.
  filtroTemaEl.addEventListener("change", render);
  buscaEl.addEventListener("input", render);
  render();
</script>
</body>
</html>
